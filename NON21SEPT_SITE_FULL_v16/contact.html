<!DOCTYPE html>
<html lang="fr"><head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Contact</title><link href="styles.css" rel="stylesheet"/></head><body>
<header class="header"><div class="container header-inner"><a href="index.html">← Accueil</a></div></header>
<main class="section"><div data-mcbr="contact-form">
<style>
  [data-mcbr="contact-form"] .hstack{display:flex;flex-wrap:wrap;gap:.75rem;align-items:flex-end}
  [data-mcbr="contact-form"] .field{display:flex;flex-direction:column;min-width:160px}
  [data-mcbr="contact-form"] .field.field-message{flex:1;min-width:260px}
  [data-mcbr="contact-form"] .actions{display:flex}
  [data-mcbr="contact-form"] button{height:42px;padding:0 1rem}
  @media (max-width:640px){
    [data-mcbr="contact-form"] .hstack{align-items:stretch}
    [data-mcbr="contact-form"] .field,
    [data-mcbr="contact-form"] .field.field-message{min-width:100%;flex:1}
    [data-mcbr="contact-form"] .actions{width:100%}
    [data-mcbr="contact-form"] .actions button{width:100%}
  }
  </style>
<h2>Contact</h2>
<p class="contact-email">Email : <a href="mailto:mouvementcitoyen.gui@gmail.com">mouvementcitoyen.gui@gmail.com</a></p>
<form id="contactForm">
<div class="hstack">
<div class="field">
<label for="nom">Nom</label>
<input id="nom" name="nom" required="" type="text"/>
</div>
<div class="field">
<label for="prenoms">Prénoms</label>
<input id="prenoms" name="prenoms" required="" type="text"/>
</div>
<div class="field field-message">
<label for="message">Message</label>
<textarea id="message" name="message" required="" rows="3"></textarea>
</div>
<div class="actions">
<button type="submit">Envoyer</button>
</div>
</div>
</form>
</div></main><!-- v26 replaced  in contact.html -->
<!-- v29-banlines  -->
<script defer="" src="/assets/patch-actualites-v30.js"></script>
<script defer="" src="/assets/cleanup-home-v38.js"></script>
<script defer="" src="/assets/cleanup-global-v39.js"></script>
<script defer="" src="/assets/cleanup-v41.js"></script>
<footer class="mcbr-footer" id="mcbr-footer" role="contentinfo">
<style>
    .mcbr-footer{margin-top:2rem;padding:1rem 0;text-align:center;border-top:1px solid #eee;font-size:.9rem;color:#555}
    .mcbr-footer a{color:inherit;text-decoration:underline}
  </style>
  © 2025 MCBR Mentions légales Confidentialité
</footer>

<script>
(function(){
  var form = document.getElementById('contactForm');
  if(!form) return;
  function findByLabel(text){
    text = text.toLowerCase();
    var lbls = form.querySelectorAll('label');
    for (var i=0;i<lbls.length;i++){
      var L = lbls[i];
      if ((L.textContent||'').toLowerCase().indexOf(text) !== -1){
        var f = L.getAttribute('for');
        if (f && document.getElementById(f)) return document.getElementById(f);
        // fallback: next input/textarea
        var n = L.nextElementSibling;
        while(n && !(n.tagName==='INPUT'||n.tagName==='TEXTAREA')) n = n.nextElementSibling;
        if (n) return n;
      }
    }
    // generic fallback
    return form.querySelector(text==='message' ? 'textarea' : 'input[type="text"],input[type="email"]');
  }
  var nom = findByLabel('nom');
  var prenom = findByLabel('prénom') || findByLabel('prenom');
  var email = form.querySelector('input[type="email"]');
  var message = findByLabel('message');

  function showStatus(ok){
    var box = document.createElement('div');
    box.setAttribute('role','status');
    box.style.marginTop = '0.5rem';
    box.style.fontWeight = '600';
    box.style.color = ok ? '#0a0' : '#b00';
    box.textContent = ok ? 'Message envoyé. Merci !' : 'Erreur d’envoi. Réessayez dans un instant.';
    form.appendChild(box);
  }

  form.addEventListener('submit', function(ev){
    ev.preventDefault();
    var payload = new FormData(form);
    if (nom) payload.set('Nom', nom.value);
    if (prenom) payload.set('Prénom', prenom.value);
    if (email) payload.set('E-mail', email.value);
    if (message) payload.set('Message', message.value);

    fetch('https://formsubmit.co/ajax/mouvementcitoyen.gui@gmail.com', {
      method: 'POST',
      body: payload,
      headers: { 'Accept': 'application/json' }
    }).then(function(r){ return r.ok ? r.json() : Promise.reject(); })
      .then(function(){ showStatus(true); form.reset(); })
      .catch(function(){ showStatus(false); });
  }, {once:false});
})();
</script>

</body></html>
